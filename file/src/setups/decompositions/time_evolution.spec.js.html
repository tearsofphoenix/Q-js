<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../">
  <title data-ice="title">src/setups/decompositions/time_evolution.spec.js | projectq</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#backends">backends</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/backends/printer.js~CommandPrinter.html">CommandPrinter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/backends/resource.js~ResourceCounter.html">ResourceCounter</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#backends-circuits">backends/circuits</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/backends/circuits/drawer.js~CircuitDrawer.html">CircuitDrawer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/backends/circuits/drawer.js~CircuitItem.html">CircuitItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/backends/circuits/tolatex.js~_Circ2Tikz.html">_Circ2Tikz</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#backends-ibm">backends/ibm</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/backends/ibm/ibm.js~IBMBackend.html">IBMBackend</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/backends/ibm/ibmhttpclient.js~IBMHTTPClient.html">IBMHTTPClient</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#backends-simulators">backends/simulators</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/backends/simulators/classicalsimulator.js~ClassicalSimulator.html">ClassicalSimulator</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/backends/simulators/jssim.js~Simulator.html">Simulator</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/backends/simulators/shared.spec.js~TrivialMapper.html">TrivialMapper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/backends/simulators/simulator.js~Simulator.html">Simulator</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#cengines">cengines</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/basicmapper.js~BasicMapperEngine.html">BasicMapperEngine</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/basics.js~BasicEngine.html">BasicEngine</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/basics.js~ForwarderEngine.html">ForwarderEngine</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/cmdmodifier.js~CommandModifier.html">CommandModifier</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/ibm5qubitmapper.js~IBM5QubitMapper.html">IBM5QubitMapper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/linearmapper.js~LinearMapper.html">LinearMapper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/main.js~MainEngine.html">MainEngine</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/manualmapper.js~ManualMapper.html">ManualMapper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/optimize.js~LocalOptimizer.html">LocalOptimizer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/swapandcnotflipper.js~SwapAndCNOTFlipper.html">SwapAndCNOTFlipper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/tagremover.js~TagRemover.html">TagRemover</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/testengine.js~CompareEngine.html">CompareEngine</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/testengine.js~DummyEngine.html">DummyEngine</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/twodmapper.js~GridMapper.html">GridMapper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/twodmapper.js~Position.html">Position</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ibmqx4_connections">ibmqx4_connections</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#cengines-replacer">cengines/replacer</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/replacer/decompositionrule.js~DecompositionRule.html">DecompositionRule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/replacer/decompositionruleset.js~DecompositionRuleSet.html">DecompositionRuleSet</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/replacer/replacer.js~AutoReplacer.html">AutoReplacer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cengines/replacer/replacer.js~InstructionFilter.html">InstructionFilter</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#libs">libs</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-len">len</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-classHierachy">classHierachy</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-instanceOf">instanceOf</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isKindclassOf">isKindclassOf</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isSubclassOf">isSubclassOf</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-tuple">tuple</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#libs-math">libs/math</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/libs/math/gates.js~AddConstant.html">AddConstant</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/libs/math/gates.js~AddConstantModN.html">AddConstantModN</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/libs/math/gates.js~MultiplyByConstantModN.html">MultiplyByConstantModN</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-SubConstant">SubConstant</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-SubConstantModN">SubConstantModN</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#meta">meta</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meta/compute.js~ComputeEngine.html">ComputeEngine</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meta/compute.js~UncomputeEngine.html">UncomputeEngine</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meta/control.js~ControlEngine.html">ControlEngine</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meta/dagger.js~DaggerEngine.html">DaggerEngine</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meta/error.js~LastEngineError.html">LastEngineError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meta/error.js~NoGateDecompositionError.html">NoGateDecompositionError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meta/error.js~NotMergeable.html">NotMergeable</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meta/error.js~NotYetMeasuredError.html">NotYetMeasuredError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meta/error.js~QubitManagementError.html">QubitManagementError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meta/loop.js~LoopEngine.html">LoopEngine</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meta/loop.js~LoopTag.html">LoopTag</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meta/tag.js~ComputeTag.html">ComputeTag</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meta/tag.js~DirtyQubitTag.html">DirtyQubitTag</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meta/tag.js~LogicalQubitIDTag.html">LogicalQubitIDTag</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/meta/tag.js~UncomputeTag.html">UncomputeTag</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Compute">Compute</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-CustomUncompute">CustomUncompute</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Uncompute">Uncompute</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Control">Control</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Dagger">Dagger</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Loop">Loop</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-dropEngineAfter">dropEngineAfter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-insertEngine">insertEngine</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#ops">ops</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/basics.js~BasicGate.html">BasicGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/basics.js~BasicMathGate.html">BasicMathGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/basics.js~BasicPhaseGate.html">BasicPhaseGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/basics.js~BasicRotationGate.html">BasicRotationGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/basics.js~ClassicalInstructionGate.html">ClassicalInstructionGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/basics.js~FastForwardingGate.html">FastForwardingGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/basics.js~SelfInverseGate.html">SelfInverseGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/command.js~Command.html">Command</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~AllocateDirtyQubitGate.html">AllocateDirtyQubitGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~AllocateQubitGate.html">AllocateQubitGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~BarrierGate.html">BarrierGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~DeallocateQubitGate.html">DeallocateQubitGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~EntangleGate.html">EntangleGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~FlushGate.html">FlushGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~HGate.html">HGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~MeasureGate.html">MeasureGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~Ph.html">Ph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~R.html">R</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~Rx.html">Rx</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~Ry.html">Ry</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~Rz.html">Rz</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~SGate.html">SGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~SqrtSwapGate.html">SqrtSwapGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~SqrtXGate.html">SqrtXGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~SwapGate.html">SwapGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~TGate.html">TGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~XGate.html">XGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~YGate.html">YGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/gates.js~ZGate.html">ZGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/metagates.js~ControlledGate.html">ControlledGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/metagates.js~DaggeredGate.html">DaggeredGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/metagates.js~Tensor.html">Tensor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/qftgate.js~QFTGate.html">QFTGate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/qubitoperator.js~QubitOperator.html">QubitOperator</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ops/timeevolution.js~TimeEvolution.html">TimeEvolution</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getInverse">getInverse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-C">C</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-stringToArray">stringToArray</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-CRz">CRz</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Allocate">Allocate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-AllocateDirty">AllocateDirty</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Entangle">Entangle</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-H">H</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Measure">Measure</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NOT">NOT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-S">S</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SqrtSwap">SqrtSwap</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SqrtX">SqrtX</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Swap">Swap</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-T">T</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-X">X</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Y">Y</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Z">Z</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-All">All</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-QFT">QFT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-CNOT">CNOT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-CX">CX</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-CZ">CZ</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Toffoli">Toffoli</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#setups">setups</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getEngineList">getEngineList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getEngineList">getEngineList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getEngineList">getEngineList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getEngineList">getEngineList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getEngineList">getEngineList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getEngineList">getEngineList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ibmqx5_connections">ibmqx5_connections</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#types">types</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/types/qubit.js~BasicQubit.html">BasicQubit</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/types/qubit.js~Qubit.html">Qubit</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Qureg">Qureg</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/setups/decompositions/time_evolution.spec.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import {expect} from &apos;chai&apos;
import math from &apos;mathjs&apos;;
import MainEngine from &apos;../../cengines/main&apos;;
import {AutoReplacer, DummyEngine, InstructionFilter} from &apos;../../cengines&apos;;
import QubitOperator from &apos;../../ops/qubitoperator&apos;;
import TimeEvolution from &apos;../../ops/timeevolution&apos;;
import {rule_commuting_terms, rule_individual_terms} from &apos;./time_evolution&apos;
import {len} from &apos;../../libs/polyfill&apos;;
import {
  All, ClassicalInstructionGate, Measure, Ph, Rx, Ry, Rz
} from &apos;../../ops&apos;;
import DecompositionRuleSet from &apos;../../cengines/replacer/decompositionruleset&apos;;
import {Control} from &apos;../../meta&apos;;
import Simulator from &apos;../../backends/simulators/simulator&apos;;

function convertNativeMatrix(vec) {
  const m = math.zeros(vec.length)
  vec.forEach((val, idx) =&gt; {
    m.subset(math.index(idx), math.complex(val.re, val.im))
  })
  return m
}

describe(&apos;time evolution test&apos;, () =&gt; {
  it(&apos;should test_recognize_commuting_terms&apos;, () =&gt; {
    const saving_backend = new DummyEngine(true)
    const eng = new MainEngine(saving_backend, [])
    const wavefunction = eng.allocateQureg(5)
    const op1 = new QubitOperator(&apos;X1 Y2&apos;, 0.5)
    const op2 = new QubitOperator(&apos;Y2 X4&apos;, -0.5)
    const op3 = new QubitOperator([], 0.5)
    const op4 = new QubitOperator(&apos;X1 Y2&apos;, 0.5).add(new QubitOperator(&apos;X2&apos;, 1e-10))
    const op5 = new QubitOperator(&apos;X1 Y2&apos;, 0.5).add(new QubitOperator(&apos;X2&apos;, 1e-8))
    const op6 = new QubitOperator(&apos;X2&apos;, 1.0)
    new TimeEvolution(1.0, op1.add(op2).add(op3).add(op4)).or(wavefunction)
    new TimeEvolution(1.0, op1.add(op5)).or(wavefunction)
    new TimeEvolution(1.0, op1.add(op6)).or(wavefunction)
    new TimeEvolution(1.0, op1).or(wavefunction)

    const cmd1 = saving_backend.receivedCommands[5]
    const cmd2 = saving_backend.receivedCommands[6]
    const cmd3 = saving_backend.receivedCommands[7]
    const cmd4 = saving_backend.receivedCommands[8]

    expect(rule_commuting_terms.gateRecognizer(cmd1)).to.equal(true)
    expect(rule_commuting_terms.gateRecognizer(cmd2)).to.equal(false)
    expect(rule_commuting_terms.gateRecognizer(cmd3)).to.equal(false)
    expect(rule_commuting_terms.gateRecognizer(cmd4)).to.equal(false)
  });

  it(&apos;should test_decompose_commuting_terms&apos;, () =&gt; {
    const saving_backend = new DummyEngine(true)

    const my_filter = (_, cmd) =&gt; {
      return (len(cmd.qubits[0]) &lt;= 2 || cmd.gate instanceof ClassicalInstructionGate)
    }

    const rules = new DecompositionRuleSet([rule_commuting_terms])
    const replacer = new AutoReplacer(rules)
    const filter_eng = new InstructionFilter(my_filter)
    const eng = new MainEngine(saving_backend, [replacer, filter_eng])
    const qureg = eng.allocateQureg(5)
    Control(eng, qureg[3], () =&gt; {
      const op1 = new QubitOperator(&apos;X1 Y2&apos;, 0.7)
      const op2 = new QubitOperator(&apos;Y2 X4&apos;, -0.8)
      const op3 = new QubitOperator([], 0.6)
      new TimeEvolution(1.5, op1.add(op2).add(op3)).or(qureg)
    })
    const cmd1 = saving_backend.receivedCommands[5]
    const cmd2 = saving_backend.receivedCommands[6]
    const cmd3 = saving_backend.receivedCommands[7]

    const found = [false, false, false]
    const scaled_op1 = new QubitOperator(&apos;X0 Y1&apos;, 0.7)
    const scaled_op2 = new QubitOperator(&apos;Y0 X1&apos;, -0.8)
    const cmds = [cmd1, cmd2, cmd3]
    const pgate = new Ph(-1.5 * 0.6)
    cmds.forEach((cmd) =&gt; {
      if (pgate.equal(cmd.gate)
      &amp;&amp; cmd.qubits[0][0].id === qureg[1].id // 1st qubit of [1,2,4]
      &amp;&amp; cmd.controlQubits[0].id === qureg[3].id) {
        found[0] = true
      } else if ((cmd.gate instanceof TimeEvolution)
      &amp;&amp; cmd.gate.hamiltonian.isClose(scaled_op1)
      &amp;&amp; Math.abs(cmd.gate.time - 1.5) &lt; 1e-12
      &amp;&amp; cmd.qubits[0][0].id === qureg[1].id
      &amp;&amp; cmd.qubits[0][1].id === qureg[2].id
      &amp;&amp; cmd.controlQubits[0].id === qureg[3].id) {
        found[1] = true
      } else if ((cmd.gate instanceof TimeEvolution)
      &amp;&amp; cmd.gate.hamiltonian.isClose(scaled_op2)
          &amp;&amp; Math.abs(cmd.gate.time - 1.5) &lt; 1e-12
      &amp;&amp; cmd.qubits[0][0].id === qureg[2].id
      &amp;&amp; cmd.qubits[0][1].id === qureg[4].id
      &amp;&amp; cmd.controlQubits[0].id === qureg[3].id) {
        found[2] = true
      }
    })

    expect(found.indexOf(false) === -1).to.equal(true)
  });

  it(&apos;should test_recognize_individual_terms&apos;, () =&gt; {
    const saving_backend = new DummyEngine(true)
    const eng = new MainEngine(saving_backend, [])
    const wavefunction = eng.allocateQureg(5)
    const op1 = new QubitOperator(&apos;X1 Y2&apos;, 0.5)
    const op2 = new QubitOperator(&apos;Y2 X4&apos;, -0.5)
    const op3 = new QubitOperator(&apos;X2&apos;, 1.0)
    new TimeEvolution(1.0, op1.add(op2)).or(wavefunction)
    new TimeEvolution(1.0, op2).or(wavefunction)
    new TimeEvolution(1.0, op3).or(wavefunction)

    const cmd1 = saving_backend.receivedCommands[5]
    const cmd2 = saving_backend.receivedCommands[6]
    const cmd3 = saving_backend.receivedCommands[7]

    expect(rule_individual_terms.gateRecognizer(cmd1)).to.equal(false)
    expect(rule_individual_terms.gateRecognizer(cmd2)).to.equal(true)
    expect(rule_individual_terms.gateRecognizer(cmd3)).to.equal(true)
  });

  it(&apos;should test_decompose_individual_terms&apos;, () =&gt; {
    const saving_eng = new DummyEngine(true)

    function my_filter(_, cmd) {
      return !(cmd.gate instanceof TimeEvolution)
    }

    const rules = new DecompositionRuleSet([rule_individual_terms])
    const replacer = new AutoReplacer(rules)
    const filter_eng = new InstructionFilter(my_filter)
    const eng = new MainEngine(new Simulator(), [replacer, filter_eng, saving_eng])
    const qureg = eng.allocateQureg(5)
    // initialize in random wavefunction by applying some gates:
    new Rx(0.1).or(qureg[0])
    new Ry(0.2).or(qureg[1])
    new Rx(0.45).or(qureg[2])
    new Rx(0.6).or(qureg[3])
    new Ry(0.77).or(qureg[4])
    eng.flush()
    // Use cheat to get initial start wavefunction:
    let [qubit_to_bit_map, init_wavefunction] = eng.backend.cheat()
    // Apply one qubit gates:
    const op1 = new QubitOperator([], 0.6)
    const op2 = new QubitOperator(&apos;X2&apos;, 0.21)
    const op3 = new QubitOperator(&apos;Y1&apos;, 0.33)
    const op4 = new QubitOperator(&apos;Z3&apos;, 0.42)
    const op5 = new QubitOperator(&apos;X0 Y1 Z2 Z4&apos;, -0.5)
    new TimeEvolution(1.1, op1).or(qureg)
    eng.flush()
    let [qbit_to_bit_map1, final_wavefunction1] = eng.backend.cheat()
    final_wavefunction1 = math.flatten(final_wavefunction1)
    final_wavefunction1 = convertNativeMatrix(final_wavefunction1)
    new TimeEvolution(1.2, op2).or(qureg)
    eng.flush()
    let [qbit_to_bit_map2, final_wavefunction2] = eng.backend.cheat()
    final_wavefunction2 = math.flatten(final_wavefunction2)
    final_wavefunction2 = convertNativeMatrix(final_wavefunction2)

    new TimeEvolution(1.3, op3).or(qureg)
    eng.flush()
    let [qbit_to_bit_map3, final_wavefunction3] = eng.backend.cheat()
    new TimeEvolution(1.4, op4).or(qureg)
    eng.flush()
    let [qbit_to_bit_map4, final_wavefunction4] = eng.backend.cheat()
    new TimeEvolution(1.5, op5).or(qureg)
    eng.flush()
    let [qbit_to_bit_map5, final_wavefunction5] = eng.backend.cheat()
    new All(Measure).or(qureg)
    // Check manually:

    const build_matrix = (list_single_matrices) =&gt; {
      let res = list_single_matrices[0]
      for (let i = 1; i &lt; len(list_single_matrices); ++i) {
        res = math.kron(res, list_single_matrices[i])
      }
      return res
    }

    const mc = math.complex
    const id_sp = math.identity(2, &apos;sparse&apos;)
    const x_sp = math.sparse([[0.0, 1.0], [1.0, 0.0]])
    const y_sp = math.sparse([[0.0, mc(0, -1.0)], [mc(0, 1.0), 0.0]])
    const z_sp = math.sparse([[1.0, 0.0], [0.0, -1.0]])

    const matrix1 = math.multiply(math.identity(2 ** 5), mc(0, -0.6 * 1.1))
    init_wavefunction = math.flatten(init_wavefunction)
    init_wavefunction = convertNativeMatrix(init_wavefunction)
    const step1 = math.multiply(math.expm(matrix1), math.matrix(init_wavefunction))
    expect(math.deepEqual(step1, final_wavefunction1)).to.equal(true)

    const matrix2_list = []
    for (let i = 0; i &lt; 5; ++i) {
      if (i === qbit_to_bit_map2[qureg[2].id]) {
        matrix2_list.push(x_sp)
      } else {
        matrix2_list.push(id_sp)
      }
    }
    matrix2_list.reverse()
    const matrix2 = math.multiply(build_matrix(matrix2_list), mc(0, 0.21 * 1.2 * -1.0))
    const step2 = math.multiply(math.expm(matrix2), step1)
    expect(math.deepEqual(step2, final_wavefunction2)).to.equal(true)

    final_wavefunction3 = math.flatten(final_wavefunction3)
    final_wavefunction3 = convertNativeMatrix(final_wavefunction3)
    const matrix3_list = []
    for (let i = 0; i &lt; 5; ++i) {
      if (i === qbit_to_bit_map3[qureg[1].id]) {
        matrix3_list.push(y_sp)
      } else {
        matrix3_list.push(id_sp)
      }
    }
    matrix3_list.reverse()
    const matrix3 = math.multiply(build_matrix(matrix3_list), mc(0, 0.33 * 1.3 * -1.0))
    const step3 = math.multiply(math.expm(matrix3), final_wavefunction2)
    expect(math.deepEqual(step3, final_wavefunction3)).to.equal(true)

    final_wavefunction4 = convertNativeMatrix(math.flatten(final_wavefunction4))
    const matrix4_list = []
    for (let i = 0; i &lt; 5; ++i) {
      if (i === qbit_to_bit_map4[qureg[3].id]) {
        matrix4_list.push(z_sp)
      } else {
        matrix4_list.push(id_sp)
      }
    }
    matrix4_list.reverse()
    const matrix4 = math.multiply(build_matrix(matrix4_list), mc(0, 0.42 * 1.4 * -1.0))
    const step4 = math.multiply(math.expm(matrix4), final_wavefunction3)
    expect(math.deepEqual(step4, final_wavefunction4)).to.equal(true)

    const matrix5_list = []
    for (let i = 0; i &lt; 5; ++i) {
      if (i === qbit_to_bit_map5[qureg[0].id]) {
        matrix5_list.push(x_sp)
      } else if (i === qbit_to_bit_map5[qureg[1].id]) {
        matrix5_list.push(y_sp)
      } else if (i === qbit_to_bit_map5[qureg[2].id]) {
        matrix5_list.push(z_sp)
      } else if (i === qbit_to_bit_map5[qureg[4].id]) {
        matrix5_list.push(z_sp)
      } else {
        matrix5_list.push(id_sp)
      }
    }
    matrix5_list.reverse()
    const matrix5 = math.multiply(build_matrix(matrix5_list), mc(0, -0.5 * 1.5 * -1.0))
    const step5 = math.multiply(math.expm(matrix5), final_wavefunction4)

    final_wavefunction5 = convertNativeMatrix(math.flatten(final_wavefunction5))
    expect(math.deepEqual(step5, final_wavefunction5)).to.equal(true)
  });
});
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
